{
    "contents" : "library(shiny)\nlibrary(reshape2)\ntotal_economicdamage_peryear <- read.csv(\"total_economicdamage_peryear.csv\", sep=\",\", header=T)\ntotal_fatalities_peryear <- read.csv(\"total_fatalities_peryear.csv\", sep=\",\", header=T)\ntotal_injuries_peryear <- read.csv(\"total_injuries_peryear.csv\", sep=\",\", header=T)\n\ntotal_economicdamage_peryear <- total_economicdamage_peryear[,-1]\ntotal_fatalities_peryear <- total_fatalities_peryear[,-1]\ntotal_injuries_peryear <- total_injuries_peryear[,-1]\n\nevtypes <<- sort(unique(total_economicdamage_peryear$event_class))\n\n#setting the data straight\ndamageyear <- merge(total_economicdamage_peryear,total_fatalities_peryear,by=(c(\"year\",\"event_class\")))\ncolnames(damageyear) <- c(\"year\",\"event_class\",\"eco\",\"fat\")\ndamageyear <- merge(damageyear,total_injuries_peryear,by=(c(\"year\",\"event_class\")))\ncolnames(damageyear) <- c(\"year\",\"event_class\",\"eco\",\"fat\",\"injuries\")\n\n\ndata <- damageyear\ndata2 <- dcast(data,year ~ event_class)\ndata2[is.na(data2)] <- 0\n\n## Define a server for the Shiny app\nshinyServer(function(input, output) {\n  \n#  output$evtypeControls <- renderUI({\n#    if(1) {\n#      checkboxGroupInput('evtypes', 'Event types', evtypes, selected=evtypes)\n#    }\n#  })\n\n  dataInput <- reactive({\n    reactdata <- subset(data2, subset=(year == input$year))\n    as.matrix(reactdata)\n  })\n \n  output$plot1 <- renderPlot({\n    \n    ## Render a barplot\n    barplot(dataInput(),\n            main=paste(input$evtype, \"in\", input$year),\n            ylab=\"Consumption (in EUR)\",\n            xlab=\"Weeks (Jan to Dec)\")\n  })\n})",
    "created" : 1414335542146.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1397303600",
    "id" : "317FAA78",
    "lastKnownWriteTime" : 1414341625,
    "path" : "~/Computational Scientist/Studiemateriaal/Johns Hopkins University Data Science Course Track/9 data products/fnie/server.R",
    "project_path" : "server.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}